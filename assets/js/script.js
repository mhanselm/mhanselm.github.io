function startTimer(){null===timer&&(timer=setInterval(updateFilter,2e3))}function stopTimer(){clearInterval(timer),timer=null}function updateFilter(){stopTimer(),filterIndex>=filters.length?getImage():($(".progress:first").clone().appendTo(".track").css({background:"rgba(255,255,255,"+(1-filterIndex/filters.length)+")"}).animate({width:100/filters.length+"%",left:100*filterIndex/filters.length+"%"}),$(".bg-animate").animate({backgroundColor:"#"+filters[filterIndex]},speed,function(){filterIndex++,startTimer()}))}function convertToDataURLviaCanvas(a,b,c){var d=document.getElementById("image");d.crossOrigin="anonymous",d.onload=function(){var a,d=document.getElementById("canvas"),e=d.getContext("2d");d.height=this.height,d.width=this.width,e.drawImage(this,0,0),a=d.toDataURL(b),c(a),d=null},d.src=a}function resizeHeader(){var a=$(window).width(),b=$(window).height(),c=a/b,d=$("#backgrounds .bg-img:last").attr("data-height")||$("#backgrounds .bg-img:last").height(),e=$("#backgrounds .bg-img:last").attr("data-width")||$("#backgrounds .bg-img:last").width(),f=e/d;$("#backgrounds .bg-img:last").attr("data-height",d).attr("data-width",e),f>c?$("#backgrounds .bg-img:last").css({width:"auto",height:b,top:0,left:-(b*f-a)/2,right:0,bottom:0}):$("#backgrounds .bg-img:last").css({width:a,height:"auto",top:-(a/f-b)/2,left:0,right:0})}function getImage(){backgrounds.length<backgroundLimit&&window.navigator.onLine?($("#backgrounds").append('<img class="bg-img" src="https://source.unsplash.com/random/'+Date.now()+'" style="visibility:hidden;"/>'),$("#backgrounds .bg-img:last").on("load",function(){resizeHeader(),backgrounds.push($("#backgrounds .bg-img:last").get(0)),changeBackgroundImage(!0),$(document).trigger("image-resolved")})):changeBackgroundImage()}function changeBackgroundImage(a){$(".bg-animate").animate({backgroundColor:"#fff",opacity:1},speed,function(){a||($("#backgrounds").append(backgrounds[bgIndex]),resizeHeader()),$("#backgrounds .bg-img:last").css("visibility","visible"),$("#backgrounds .bg-img:not(:last)").remove(),$("#index").text(bgIndex+1),filterIndex=0,bgIndex++,bgIndex=bgIndex>=backgroundLimit?0:bgIndex,$(".track").html('<div class="progress"></div>'),$(".progress:first").css({background:"rgba(255,255,255,"+(1-filterIndex/filters.length)+")"}).animate({width:100/filters.length+"%",left:100*filterIndex/filters.length+"%"}),filterIndex++,$(".bg-animate").animate({backgroundColor:"#"+filters[0],opacity:"0.4"},speed,function(){startTimer(),frame=0})})}function home(){backgrounds=[],hours=-1,minutes=-1,seconds=-1,getImage(),progressWidth=$(".track").width(),wHeight=$(document).height(),$("section.home").height(wHeight),$(".home .name").css("margin-top",wHeight/4),setTimeout(function(){$("#firstname").width($("#firstname").width()),$("#lastname").width($("#lastname").width())},200),$("#index").text(bgIndex+1),$("#count").text(backgroundLimit),$.simpleWeather({woeid:"4118",unit:"c",success:function(a){html='<h2><i class="icon-'+a.code+'"></i> '+a.temp+"&deg;"+a.units.temp+"</h2>",html+="<ul><li>"+a.city+", "+a.region+"</li>",html+='<li class="currently">'+a.currently+"</li>",html+="<li>"+a.wind.direction+" "+a.wind.speed+" "+a.units.speed+"</li></ul>",$("#weather").html(html)}}),$(".image-count").click(function(){5*LIMIT>backgroundLimit&&(backgroundLimit+=LIMIT),$("#count").fadeOut(500,function(){$(this).text(backgroundLimit).fadeIn()})});var a=400,b=0;setInterval(function(){b=new Date,b.getHours()!==hours&&(hours=b.getHours(),$("#time #hours").fadeOut(a,function(){$(this).text((10>hours?"0":"")+hours).fadeIn(a)})),b.getMinutes()!==minutes&&(minutes=b.getMinutes(),$("#time #minutes").fadeOut(a,function(){$(this).text((10>minutes?"0":"")+minutes).fadeIn(a)})),b.getSeconds()!==seconds&&(seconds=b.getSeconds(),$("#time #seconds").text((10>seconds?"0":"")+seconds))},1e3),$(document).one("image-resolved",function(){startTimer(),$(".home .name").css("transition","all 2s ease-in-out"),$(".name h1").animate({color:"#fefefe"},2e3),$(".name").css({border:"0.15em solid #fefefe"}),setTimeout(function(){$("#firstname").html("M<small>atthew</small>").animate({width:$("#firstname").clone().appendTo(".home .name h1").hide().css("width","auto").width()},600,function(){$("#lastname").html("H<small>anselman</small>").delay(300).animate({width:$("#lastname").clone().appendTo(".home .name h1").hide().css("width","auto").width()},600,function(){$(".name .firstname:last").remove(),$(".name .lastname:last").remove()})})},2500),$(document).off("image-resolved")})}var filters=["16a085","2980b9","f1c40f","8e44ad","c0392b"],filterIndex=0,frame=0,bgIndex=0,speed=1500,LIMIT=9,backgroundLimit=LIMIT,backgrounds=[],progressWidth,wHeight,hours=0,minutes=0,seconds=0,timer=null;$(window).resize(function(){resizeHeader(),wHeight=$(window).height(),$("section.home").height(wHeight),$(".home .name").css("margin-top",wHeight/4)}),jQuery(function(a){function b(a){l?(a.removeClass("active"),j.removeClass("menu-active"),setTimeout(function(){a.removeClass("initial"),j.removeClass("menu-initial")},300),l=!1):(j.addClass("menu-initial"),a.addClass("initial"),setTimeout(function(){j.addClass("menu-active"),a.addClass("active")},1),l=!0)}function c(){a(".menu-list-item a").each(function(){var b=a(this);b.removeClass("current"),b.attr("href")==window.location.href&&b.addClass("current")})}function d(){var b=a(".post-list").masonry({itemSelector:".post",isAnimated:!1,gutter:0,columnWidth:1,transitionDuration:0}).imagesLoaded().always(function(){b.masonry("layout")})}function e(){a("pre code").each(function(b,c){hljs.highlightBlock(c);var d=a(this),e=d.html().split(/\n/).length,f=[];for(b=1;e>b;b++)f+='<span class="line">'+b+"</span>";d.parent().addClass("codeblock").append('<div class="lines">'+f+"</div>")})}function f(){a("#wrapper").fitVids()}function g(){"undefined"!=typeof disqus&&document.getElementById("disqus_thread")?a.ajax({type:"GET",url:"//"+disqus+".disqus.com/embed.js",dataType:"script",cache:!0}):a(".post-comments").css({display:"none"})}function h(){d(),i(),e(),f(),g(),c(),home()}function i(){a('a[href^="'+window.location.origin+'"], .post-image a, .post-title a, .post-more a, .post-meta a, .post-tags a, #pagination a').each(function(){var b=a(this);b.hasClass("rss")||(b.addClass("js-ajax-link"),b.attr("href").indexOf("page")>-1&&b.addClass("js-archive-index"),b.attr("href")==window.location.origin&&b.addClass("js-show-index"),b.attr("href").indexOf("tag")>-1&&b.addClass("js-tag-index"),b.attr("href").indexOf("author")>-1&&b.addClass("js-author-index"))})}var j=a("html"),k=a("body");k.on("click",'[data-action="menu"]',function(){var c=(a(this).data("action"),a('[data-target="'+a(this).data("target")+'"]').not("[data-action]"));b(c)});var l=!1;k.on("click",".overlay, #menu a",function(){if(j.hasClass("menu-active")){var c=a('[data-target="menu"]').not("[data-action]");b(c)}}),c(),d(),e(),f(),g(),home(),i();var m=window.History,n=!1,o=a("#ajax-container");return m.enabled?(m.Adapter.bind(window,"statechange",function(){j.addClass("loading");var b=m.getState();a.get(b.url,function(b){var c=a(b),d=a("#ajax-container",c).contents(),e=b.match(/<title>(.*?)<\/title>/)[1];o.fadeOut(500,function(){j.hasClass("push-next")&&(j.removeClass("push-next"),j.addClass("pushed-next")),j.hasClass("push-prev")&&(j.removeClass("push-prev"),j.addClass("pushed-prev")),document.title=a("<textarea/>").html(e).text(),o.html(d),k.removeClass(),k.addClass(a("#body-class").attr("class")),NProgress.done(),o.fadeIn(500),a(document).scrollTop(0),setTimeout(function(){j.removeClass("loading")},50),h(),n=!1})})}),a("body").on("click",".js-ajax-link",function(b){b.preventDefault();var c=a(this);if(c.hasClass("post-nav-item")||c.hasClass("pagination-item")?((c.hasClass("post-nav-next")||c.hasClass("pagination-next"))&&(j.removeClass("pushed-prev"),j.addClass("push-next")),(c.hasClass("post-nav-prev")||c.hasClass("pagination-prev"))&&(j.removeClass("pushed-next"),j.addClass("push-prev"))):(j.removeClass("pushed-next"),j.removeClass("pushed-prev")),n===!1){var d=m.getState(),e=a(this).prop("href"),f=a(this).attr("title")||null;e.replace(/\/$/,"")!==d.url.replace(/\/$/,"")&&(n=!0,j.addClass("loading"),NProgress.start(),m.pushState({},f,e))}}),void a("body").on("click","#post-index .post .js-ajax-link",function(){var b=a(this).parents(".post");b.addClass("initial"),setTimeout(function(){b.addClass("active")},1)})):!1});